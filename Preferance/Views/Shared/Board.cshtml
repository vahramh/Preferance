@model Preferance.Models.Match
<div style="width:100%">
    <table style="border:double;background-color:beige;width:100%">
        <tr>
            <td style="width:20%">@Model.Player1.Name</td>
            <td style="width:20%">@Model.Player2.Name</td>
            <td style="width:20%">@Model.Player3.Name</td>
            <td style="width:20%">@Model.Player4.Name</td>
            <td style="width:20%">Last Hand</td>
        </tr>
        <tr>
            @if (Model.Player1CurrentScore < 0)
            {
                <td style="width:20%;color:red">@Model.Player1CurrentScore</td>
            }
            @if (Model.Player1CurrentScore == 0)
            {
                <td style="width:20%;color:black">@Model.Player1CurrentScore</td>
            }
            @if (Model.Player1CurrentScore > 0)
            {
                <td style="width:20%;color:green">@Model.Player1CurrentScore</td>
            }
            @if (Model.Player2CurrentScore < 0)
            {
                <td style="width:20%;color:red">@Model.Player2CurrentScore</td>
            }
            @if (Model.Player2CurrentScore == 0)
            {
                <td style="width:20%;color:black">@Model.Player2CurrentScore</td>
            }
            @if (Model.Player2CurrentScore > 0)
            {
                <td style="width:20%;color:green">@Model.Player2CurrentScore</td>
            }
            @if (Model.Player3CurrentScore < 0)
            {
                <td style="width:20%;color:red">@Model.Player3CurrentScore</td>
            }
            @if (Model.Player3CurrentScore == 0)
            {
                <td style="width:20%;color:black">@Model.Player3CurrentScore</td>
            }
            @if (Model.Player3CurrentScore > 0)
            {
                <td style="width:20%;color:green">@Model.Player3CurrentScore</td>
            }
            @if (Model.Player4CurrentScore < 0)
            {
                <td style="width:20%;color:red">@Model.Player4CurrentScore</td>
            }
            @if (Model.Player4CurrentScore == 0)
            {
                <td style="width:20%;color:black">@Model.Player4CurrentScore</td>
            }
            @if (Model.Player4CurrentScore > 0)
            {
                <td style="width:20%;color:green">@Model.Player4CurrentScore</td>
            }
            <td style="width:20%">
                @if (!(Model.LastHand == null))
                {
                    var handcards = Model.LastHand.Cards;
                    @foreach (var card in handcards)
                    {
                        <img src="~/images/@(card.Value)_@(card.Colour).png" style="width:20%;height:auto" alt="@card.Value of @card.Colour"/>
                    }
                }
            </td>
        </tr>
    </table>
    <table style="border:double;background-color:aquamarine;width:100%">
        <tr style="height:20%">
            <td>
                <table style="width:100%; height:100%">
                    <tr>
                        <td style="width:20%; border-right:solid"></td>
                        <td style="width:20%; border-right:solid;border-bottom:solid">@Model.Player14Whist</td>
                        <td style="width:20%; border-right:solid;border-bottom:solid">@Model.Player13Whist</td>
                        <td style="width:20%; border-right:solid;border-bottom:solid">@Model.Player12Whist</td>
                        <td style="width:20%"></td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr style="height:60%">
            <td style="width:100%">
                <table style="height:100%; width:100%">
                    <tr style="height:100%">
                        <td style="width:20%">
                            <table style="height:100%; width:100%">
                                <tr style="height:33%">
                                    <td style="width:100%; border-top:solid; border-bottom:solid;border-right:solid">@Model.Player41Whist</td>
                                </tr>
                                <tr style="height:33%">
                                    <td style="width:100%; border-bottom:solid;border-right:solid">@Model.Player42Whist</td>
                                </tr>
                                <tr style="height:33%">
                                    <td style="width:100%; border-bottom:solid;border-right:solid">@Model.Player43Whist</td>
                                </tr>
                            </table>
                        </td>
                        <td style="width:60%">
                            <table style="height:100%; width:100%; border:solid">
                                <tr style="height:5%">
                                    <td style="width:5%"></td>
                                    <td style="width:90%">@Model.Player1Pool</td>
                                    <td style="width:5%"></td>
                                </tr>
                                <tr>
                                    <td style="width:5%">@Model.Player4Pool</td>
                                    <td style="width:90%">
                                        <table style="width:100%; height:100%; border:solid">
                                            <tr style="height:33%">
                                                <td style="width:33%"></td>
                                                <td style="width:34%">@Model.Player1Dump</td>
                                                <td style="width:33%"></td>
                                            </tr>
                                            <tr style="height:34%">
                                                <td style="width:33%">@Model.Player4Dump</td>
                                                <td style="width:34%">
                                                    <table style="width:100%; height:100%; border:solid">
                                                        <tr style="height:33%">
                                                            <td style="width:33%"></td>
                                                            @if (!(Model.Games == null))
                                                            {
                                                                @if (@Model.Games[Model.Games.Count - 1].NextPlayer.Id == @Model.Games[Model.Games.Count - 1].Player1.Id)
                                                                {
                                                                    <td style="width:34%; color:red">
                                                                        <b>@Model.Player1.Name</b>
                                                                    </td>
                                                                }
                                                                else
                                                                {
                                                                    @if (@Model.Games[Model.Games.Count - 1].ActivePlayer.Id == @Model.Games[Model.Games.Count - 1].Player1.Id)
                                                                    {
                                                                        <td style="width:34%">
                                                                            <b>@Model.Player1.Name</b>
                                                                        </td>
                                                                    }
                                                                    else
                                                                    {
                                                                        @if (@Model.Games[Model.Games.Count - 1].Dealer.Id == @Model.Games[Model.Games.Count - 1].Player1.Id)
                                                                        {
                                                                            <td style="width:34%;color:grey">
                                                                                <b>@Model.Player1.Name (D)</b>
                                                                            </td>
                                                                        }
                                                                        else
                                                                        {
                                                                            <td style="width:34%">@Model.Player1.Name</td>
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                            else
                                                            {
                                                                <td style="width:34%">@Model.Player1.Name</td>
                                                            }
                                                            <td style="width:33%"></td>
                                                        </tr>
                                                        <tr style="height:34%">
                                                            @if (!(Model.Games == null))
                                                            {
                                                                @if (@Model.Games[Model.Games.Count - 1].NextPlayer.Id == @Model.Games[Model.Games.Count - 1].Player4.Id)
                                                                {
                                                                    <td style="width:33%; color:red"><b>@Model.Player4.Name</b></td>
                                                                }
                                                                else
                                                                {
                                                                    @if (@Model.Games[Model.Games.Count - 1].ActivePlayer.Id == @Model.Games[Model.Games.Count - 1].Player4.Id)
                                                                    {
                                                                        <td style="width:34%"><b>@Model.Player4.Name</b></td>
                                                                    }
                                                                    else
                                                                    {
                                                                        @if (@Model.Games[Model.Games.Count - 1].Dealer.Id == @Model.Games[Model.Games.Count - 1].Player4.Id)
                                                                        {
                                                                            <td style="width:34%; color:grey"><b>@Model.Player4.Name (D)</b></td>
                                                                        }
                                                                        else
                                                                        {
                                                                            <td style="width:33%">@Model.Player4.Name</td>
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                            else
                                                            {
                                                                <td style="width:33%">@Model.Player4.Name</td>
                                                            }
                                                            <td style="width:34%"></td>
                                                            @if (!(Model.Games == null))
                                                            {
                                                                @if (@Model.Games[Model.Games.Count - 1].NextPlayer.Id == @Model.Games[Model.Games.Count - 1].Player2.Id)
                                                                {
                                                                    <td style="width:33%; color:red"><b>@Model.Player2.Name</b></td>
                                                                }
                                                                else
                                                                {
                                                                    @if (@Model.Games[Model.Games.Count - 1].ActivePlayer.Id == @Model.Games[Model.Games.Count - 1].Player2.Id)
                                                                    {
                                                                        <td style="width:34%"><b>@Model.Player2.Name</b></td>
                                                                    }
                                                                    else
                                                                    {
                                                                        @if (@Model.Games[Model.Games.Count - 1].Dealer.Id == @Model.Games[Model.Games.Count - 1].Player2.Id)
                                                                        {
                                                                            <td style="width:34%; color:grey"><b>@Model.Player2.Name (D)</b></td>
                                                                        }
                                                                        else
                                                                        {
                                                                            <td style="width:33%">@Model.Player2.Name</td>
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                            else
                                                            {
                                                                <td style="width:33%">@Model.Player2.Name</td>
                                                            }
                                                        </tr>
                                                        <tr style="height:33%">
                                                            <td style="width:33%"></td>
                                                            @if (!(Model.Games == null))
                                                            {
                                                                @if (@Model.Games[Model.Games.Count - 1].NextPlayer.Id == @Model.Games[Model.Games.Count - 1].Player3.Id)
                                                                {
                                                                    <td style="width:34%; color:red"><b>@Model.Player3.Name</b></td>
                                                                }
                                                                else
                                                                {
                                                                    @if (@Model.Games[Model.Games.Count - 1].ActivePlayer.Id == @Model.Games[Model.Games.Count - 1].Player3.Id)
                                                                    {
                                                                        <td style="width:34%"><b>@Model.Player3.Name</b></td>
                                                                    }
                                                                    else
                                                                    {
                                                                        @if (@Model.Games[Model.Games.Count - 1].Dealer.Id == @Model.Games[Model.Games.Count - 1].Player3.Id)
                                                                        {
                                                                            <td style="width:34%;color:grey"><b>@Model.Player3.Name (D)</b></td>
                                                                        }
                                                                        else
                                                                        {
                                                                            <td style="width:34%">@Model.Player3.Name</td>
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                            else
                                                            {
                                                                <td style="width:34%">@Model.Player3.Name</td>
                                                            }
                                                            <td style="width:33%"></td>
                                                        </tr>
                                                    </table>
                                                </td>
                                                <td style="width:33%">@Model.Player2Dump</td>
                                            </tr>
                                            <tr style="height:33%">
                                                <td style="width:33%"></td>
                                                <td style="width:34%">@Model.Player3Dump</td>
                                                <td style="width:33%"></td>
                                            </tr>
                                        </table>
                                    </td>
                                    <td style="width:5%">@Model.Player2Pool</td>
                                </tr>
                                <tr style="height:5%">
                                    <td style="width:5%"></td>
                                    <td style="width:90%">@Model.Player3Pool</td>
                                    <td style="width:5%"></td>
                                </tr>
                            </table>
                        </td>
                        <td style="width:20%">
                            <table style="width:100%; height:100%">
                                <tr style="height:33%">
                                    <td style="width:100%; border-top:solid;border-bottom:solid;border-left:solid">@Model.Player21Whist</td>
                                </tr>
                                <tr style="height:33%">
                                    <td style="width:100%; border-bottom:solid;border-left:solid">@Model.Player24Whist</td>
                                </tr>
                                <tr style="height:33%">
                                    <td style="width:100%; border-bottom:solid;border-left:solid">@Model.Player23Whist</td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr style="height:20%">
            <td>
                <table style="width:100%">
                    <tr>
                        <td style="width:20%; border-right:solid"></td>
                        <td style="width:20%; border-right:solid;border-top:solid">@Model.Player34Whist</td>
                        <td style="width:20%; border-right:solid;border-top:solid">@Model.Player31Whist</td>
                        <td style="width:20%; border-right:solid;border-top:solid">@Model.Player32Whist</td>
                        <td style="width:20%"></td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>